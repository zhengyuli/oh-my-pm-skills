# ============================================================================
# 标准章节模板 (Common Sections Template)
# ============================================================================
# 用途：定义技能文档中常用的标准章节模板
# 版本：1.0.0
# 作者：oh-my-pm-skills
#
# 使用方法：
#   在 SKILL.md 中通过相对路径引用：
#   "详见 shared/common-sections.yaml#best_practices.research"
#
# 包含的模板：
#   - best_practices: 最佳实践模板（research/scoring/security）
#   - integration_points: 集成点模板
#   - when_to_use: 触发条件模板
#   - execution_flow: 执行流程模板
#
# ============================================================================

# ------------------------------------------------------------------------------
# 最佳实践模板
# ------------------------------------------------------------------------------

best_practices:
  # 研究类技能最佳实践
  research:
    do:
      - "多源交叉验证"
      - "标注数据来源和可靠性"
      - "定期更新研究报告"
      - "关注数据质量"
      - "保持客观中立"
    dont:
      - "只依赖单一数据源"
      - "忽视数据时效性"
      - "混淆事实和观点"
      - "过度推断"
      - "忽视样本偏差"

  # 评分类技能最佳实践
  scoring:
    do:
      - "明确评分标准和假设"
      - "记录数据来源和依据"
      - "定期回顾和调整评分"
      - "使用定性定量结合"
      - "考虑团队容量和约束"
    dont:
      - "盲目信任分数，忽略上下文"
      - "使用不一致的标准"
      - "忽视定性因素"
      - "不记录假设和推理"
      - "过度优化评分模型"

  # 安全类技能最佳实践
  security:
    do:
      - "早期进行威胁建模（设计阶段）"
      - "绘制清晰的数据流图"
      - "对所有信任边界建模"
      - "定期更新威胁模型"
      - "验证缓解措施有效性"
    dont:
      - "只关注技术威胁"
      - "忽视社会工程学"
      - "过度依赖工具"
      - "忽视低风险威胁"
      - "一次建模后从不更新"

  # 生成类技能最佳实践
  generation:
    do:
      - "验证输入数据完整性"
      - "使用标准模板"
      - "保持输出格式一致"
      - "生成后进行质量检查"
      - "记录生成参数和版本"
    dont:
      - "跳过验证步骤"
      - "使用非标准格式"
      - "忽略模板规范"
      - "不进行质量检查"
      - "不记录生成历史"

  # 分析类技能最佳实践
  analysis:
    do:
      - "定义清晰的分析目标"
      - "使用适当的分析方法"
      - "验证数据质量"
      - "可视化分析结果"
      - "提供可操作的建议"
    dont:
      - "盲目分析"
      - "使用不当的方法"
      - "忽视数据质量"
      - "只提供原始数据"
      - "缺乏实际建议"

# ------------------------------------------------------------------------------
# 集成点模板
# ------------------------------------------------------------------------------

integration_points:
  template: |
    ## 集成点

    ### 使用的引擎
    - **引擎名称**: 用途描述

    ### 与其他技能协作
    - **技能名称**: 协作描述

    ### 数据流
    ```
    [上游技能] → [当前技能] → [下游技能]
    ```

  examples:
    upstream_provider:
      description: "提供数据给其他技能"
      format: |
        ### 下游技能
        - **skill-name**: 消费什么数据

    downstream_consumer:
      description: "消费其他技能的数据"
      format: |
        ### 上游技能
        - **skill-name**: 提供什么数据

    engine_user:
      description: "使用引擎提供的服务"
      format: |
        ### 使用的引擎
        - **engine-name**: 用于什么目的

# ------------------------------------------------------------------------------
# 触发条件模板
# ------------------------------------------------------------------------------

when_to_use:
  template: |
    ## When to Use This Skill

    用户请求以下功能时激活此技能：
    - "触发词1"
    - "触发词2"
    - "触发词3"

  examples_by_category:
    research:
      - "研究竞品"
      - "市场分析"
      - "行业趋势"
      - "竞品对比"
      - "市场机会分析"

    scoring:
      - "评估优先级"
      - "功能排序"
      - "RICE 评分"
      - "ICE 评分"
      - "应该先做哪个功能"

    security:
      - "威胁建模"
      - "安全风险评估"
      - "合规检查"
      - "漏洞分析"
      - "安全测试用例"

    generation:
      - "生成 PRD"
      - "创建需求文档"
      - "生成测试用例"
      - "创建报告"
      - "生成文档"

    analysis:
      - "数据分析"
      - "用户行为分析"
      - "A/B 测试"
      - "指标分析"
      - "趋势分析"

# ------------------------------------------------------------------------------
# 执行流程模板
# ------------------------------------------------------------------------------

execution_flow:
  template: |
    ## Core Process

    ### 步骤 1: [步骤名称]
    [步骤说明]

    ### 步骤 2: [步骤名称]
    [步骤说明]

    ### 步骤 3: [步骤名称]
    [步骤说明]

  patterns:
    three_phase:
      description: "三阶段执行流程"
      phases:
        - name: "准备阶段"
          steps:
            - "收集输入数据"
            - "验证数据完整性"
            - "准备执行环境"
        - name: "执行阶段"
          steps:
            - "执行核心逻辑"
            - "调用相关引擎"
            - "处理中间结果"
        - name: "输出阶段"
          steps:
            - "格式化输出"
            - "质量检查"
            - "生成最终报告"

    linear:
      description: "线性执行流程"
      steps:
        - "步骤 1: 初始化"
        - "步骤 2: 处理"
        - "步骤 3: 验证"
        - "步骤 4: 输出"

    iterative:
      description: "迭代执行流程"
      steps:
        - "步骤 1: 初始化"
        - "步骤 2-N: 迭代处理"
          - "步骤 2.1: 分析"
          - "步骤 2.2: 优化"
          - "步骤 2.3: 验证"
        - "步骤 3: 汇总结果"
        - "步骤 4: 输出"

# ------------------------------------------------------------------------------
# 输出格式模板
# ------------------------------------------------------------------------------

output_format:
  template: |
    ## 输出格式

    ### 标准输出
    ```yaml
    result:
      status: "success"
      data: {...}
      metadata:
        timestamp: "[时间戳]"
        version: "[版本]"
    ```

    ### 错误输出
    ```yaml
    error:
      code: "[错误代码]"
      message: "[错误信息]"
      details:
        - "[详细错误1]"
        - "[详细错误2]"
    ```

  common_formats:
    markdown_report:
      description: "Markdown 格式报告"
      sections:
        - "执行摘要"
        - "详细分析"
        - "建议"
        - "附录"

    yaml_data:
      description: "YAML 格式数据"
      structure:
        - "元数据"
        - "核心数据"
        - "附加信息"

    json_response:
      description: "JSON 格式响应"
      structure:
        - "状态"
        - "数据"
        - "元数据"

# ------------------------------------------------------------------------------
# 参考章节模板
# ------------------------------------------------------------------------------

reference_section:
  template: |
    ## 参考

    ### 评分模型
    - RICE: shared/scoring-models.yaml#RICE
    - ICE: shared/scoring-models.yaml#ICE
    - MoSCoW: shared/scoring-models.yaml#MoSCoW

    ### 搜索策略
    - 多搜索引擎策略: shared/search-strategies.yaml#multi_search_engine_strategy
    - 智能降级策略: shared/search-strategies.yaml#intelligent_fallback_strategy
    - 分层搜索策略: shared/search-strategies.yaml#tiered_search_strategy

    ### 最佳实践
    - 研究类: shared/common-sections.yaml#best_practices.research
    - 评分类: shared/common-sections.yaml#best_practices.scoring
    - 安全类: shared/common-sections.yaml#best_practices.security

  usage_notes:
    - "在技能文件末尾添加参考章节"
    - "提供清晰的引用路径"
    - "只引用实际使用的组件"
    - "保持引用格式一致"
